<!DOCTYPE html>
<html>
<head>
  <title>Send to Slack</title>
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; padding: 20px; margin: 0; }
    .container { max-width: 500px; margin: 0 auto; }
    textarea { 
      width: 100%; 
      height: 100px; 
      margin: 10px 0; 
      padding: 10px; 
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 4px;
      resize: vertical;
      font-family: inherit;
    }
    button { 
      background: #4A154B; 
      color: white; 
      border: none; 
      padding: 10px 15px; 
      cursor: pointer; 
      border-radius: 4px;
      font-size: 14px;
    }
    button:hover { background: #611f69; }
    button:disabled { background: #9e9e9e; cursor: not-allowed; }
    #result { 
      margin-top: 10px; 
      padding: 10px; 
      border-radius: 4px; 
      display: none; 
    }
    .success { background: #dff0d8; color: #3c763d; border: 1px solid #d6e9c6; }
    .error { background: #f2dede; color: #a94442; border: 1px solid #ebccd1; }
    h3 { margin-top: 0; color: #333; }
  </style>
</head>
<body>
  <div class="container">
    <h3>Send Message to Slack</h3>
    <textarea id='message' placeholder='Type your message here...'></textarea>
    <button id="sendButton" onclick='sendMessage()'>Send to Slack</button>
    <div id='result'></div>
  </div>

  <script>
    function sendMessage() {
      var message = document.getElementById('message').value.trim();
      var resultDiv = document.getElementById('result');
      var button = document.getElementById('sendButton');
      
      if (!message) {
        showResult('Please enter a message', 'error');
        return;
      }
      
      // Disable button
      button.disabled = true;
      button.textContent = 'Sending...';
      
      // Your Replit service URL
      var serviceUrl = 'https://e62db491-0255-4031-bbd8-e584bf9c4467-00-347oxjexqfcpq.janeway.replit.dev/send-to-slack';
      
      // Send the request to your service
      fetch(serviceUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ text: message })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          showResult('Message sent successfully!', 'success');
          document.getElementById('message').value = '';
        } else {
          showResult('Error: ' + (data.error || 'Failed to send message'), 'error');
        }
      })
      .catch(error => {
        showResult('Error: ' + error.message, 'error');
        console.error('Error:', error);
      })
      .finally(() => {
        // Re-enable button
        button.disabled = false;
        button.textContent = 'Send to Slack';
      });
    }
    
    function showResult(message, type) {
      var resultDiv = document.getElementById('result');
      resultDiv.textContent = message;
      resultDiv.className = type;
      resultDiv.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(function() {
          resultDiv.style.display = 'none';
        }, 3000);
      }
    }
  </script>
</body>
</html>
